!function(t){var e={};function i(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(o,s,function(e){return t[e]}.bind(null,s));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist",i(i.s=0)}([function(t,e,i){"use strict";var o=function(t){return t&&t.__esModule?t:{default:t}}(i(1));window.Biu=o.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),n=function(t){return t&&t.__esModule?t:{default:t}}(i(2));var r=new WeakMap;function a(){if(r.has(this))return r.get(this);var t={};return r.set(this,t),t}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=a.call(this),o=document.querySelector(e.el),s=document.createElement("div");if(s.style.position="relative",s.style.overflow="hidden",s.style.height="100%",s.style.width="100%",s.style.pointerEvents="none",o.appendChild(s),i.container=s,this.config={speed:6e3},this.style={fontSize:"25px",opacity:1,fontFamily:"SimHei"},i.bList=[],i.prepareList=[],i.progress={value:0,pause:0,start:0,currentSecond:0},i.timer=null,i.clip=new Map,i.track={roll:new Map,top:new Map,bottom:new Map,rollTop:0,topTop:0,bottomTop:-1},i.state=0,e.speed&&(this.config.speed=e.speed),e.config)for(var n=Object.keys(e.config),r=0;r<n.length;++r)this.config[n[r]]=e.config[n[r]];if(e.style)for(var l=Object.keys(e.style),f=0;f<l.length;++f)this.style[l[f]]=e.style[l[f]]}return s(t,[{key:"getAttr",value:function(){return a.call(this)}},{key:"play",value:function(t){var e=a.call(this),i=e.progress;if(1!==e.state||void 0!==t){var o=2===e.state,s=0===e.state,n=1===e.state;e.state=1;var r=Date.now(),l=this;if(i.start=r,void 0!==t&&(i.value=t,i.currentSecond=Math.floor(t/1e3),this.clear(),h.call(this)),!n){o?(void 0===t&&l.syncTrack(r-i.pause),e.bList.forEach(function(t){t.resume()})):s&&void 0===t&&h.call(this);var f=i.value,c=Math.ceil(f/1e3),p=1e3-f%1e3;i.currentSecond!==c&&(i.currentSecond=c,l.biu(c,p));e.timer=setInterval(function(){var t=Date.now()-i.start+i.value,e=Math.ceil(t/1e3),o=1e3-t%1e3;i.currentSecond!==e&&(i.currentSecond=e,l.biu(e,o))},500),e.prepareList.length>0&&(e.prepareList.forEach(function(t){l.render(t)}),e.prepareList=[])}}}},{key:"biu",value:function(t,e){for(var i=a.call(this),o=i.bList,s=i.container,n=Date.now(),r=0;r<o.length&&n>=o[r].speed+o[r].startTime;++r)s.removeChild(o[r].dom);if(r>0&&o.splice(0,r),void 0!==document.hidden?!document.hidden:void 0===document.webkitHidden||!document.webkitHidden){var l=i.clip.get(t);l&&this.render(l,e)}}},{key:"load",value:function(t){t instanceof Array||(t=[t]);var e=this;t.forEach(function(t){var i=f(t);null!==i&&c.call(e,i)})}},{key:"render",value:function(t,e,i){var s=this;e||(e=0),void 0===i&&(i=!1);for(var r=function(r){var l=t[r],f=function(){var t=document.createElement("div"),e=this.style;return t.style.position="absolute",t.style.whiteSpace="pre",t.style.display="inline-block",t.style.userSelect="none",t.style.webkitUserSelect="none",t.style.pointerEvents="none",t.style.color="#fff",t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight="bold",t.style.opacity=e.opacity,t.style.textShadow="0 0 1px #000, 0 0 1px #000, 0 0 1px #000",t}.call(s);f.innerText=l.text,l.color&&(f.style.color=l.color),"object"===o(l.style)&&Object.keys(l.style).forEach(function(t){f.style[t]=l.style[t]});var c={dom:f,node:l,delay:e,immediately:i};switch(l.type){case 1:(function(t){var e=t.dom,i=t.node,o=t.delay,s=t.immediately,r=a.call(this),l=this.config,f=r.container,c=s?0:o+i.offset,h=Date.now();e.style.left=f.clientWidth+1+"px",f.appendChild(e);var p=new n.default({cfgObj:i,dom:e,speed:l.speed,offset:c,style:this.style});p.distination=(f.clientWidth+e.offsetWidth)/2+1;var u=h+p.speed+p.offset,d=!1,y=0,m=r.track;for(;y<=f.clientHeight-e.offsetHeight;){if(!m.top.has(y)||h+p.offset>=m.top.get(y).finish){d=!0;break}y+=e.offsetHeight}d||(m.topTop>f.clientHeight-e.offsetHeight&&(m.topTop=0),y=m.topTop,m.topTop+=e.offsetHeight);e.style.top=y+"px",p.startTime=h+p.offset,m.top.set(y,{finish:u}),r.bList.push(p),p.shot()}).call(s,c);break;case 2:(function(t){var e=t.dom,i=t.node,o=t.delay,s=t.immediately,r=a.call(this),l=this.config,f=r.container,c=s?0:o+i.offset,h=Date.now();e.style.left=f.clientWidth+1+"px",f.appendChild(e);var p=new n.default({cfgObj:i,dom:e,speed:l.speed,offset:c,style:this.style});p.distination=(f.clientWidth+e.offsetWidth)/2+1;var u=h+p.speed+p.offset,d=!1,y=f.clientHeight-e.offsetHeight,m=r.track;for(;y>=0;){if(!m.bottom.has(y)||h+p.offset>=m.bottom.get(y).finish){d=!0;break}y-=e.offsetHeight}d||(m.bottomTop<0&&(m.bottomTop=f.clientHeight-e.offsetHeight),y=m.bottomTop,m.bottomTop-=e.offsetHeight);e.style.top=y+"px",p.startTime=h+p.offset,m.bottom.set(y,{finish:u}),r.bList.push(p),p.shot()}).call(s,c);break;default:(function(t){var e=t.dom,i=t.node,o=t.delay,s=t.immediately,r=a.call(this),l=r.container,f=this.config,c=s?0:o+i.offset,h=Date.now();e.style.left=l.clientWidth+1+"px",e.style.willChange="transform",l.appendChild(e);var p=new n.default({cfgObj:i,dom:e,speed:f.speed,offset:c,style:this.style});p.distination=l.clientWidth+e.offsetWidth+2;var u=p.distination/p.speed,d=h+p.speed+c,y=(p.distination-e.offsetWidth-1)/u+h+c,m=e.offsetWidth/u+h+c,v=!1,b=0,g=r.track;for(;b<=l.clientHeight-e.offsetHeight;){if(!g.roll.has(b)||h+c>=g.roll.get(b).appear&&g.roll.get(b).finish<=y){v=!0;break}b+=e.offsetHeight}v||(g.rollTop>l.clientHeight-e.offsetHeight&&(g.rollTop=0),b=g.rollTop,g.rollTop+=e.offsetHeight);e.style.top=b+"px",p.startTime=h+c,g.roll.set(b,{appear:m,finish:d}),r.bList.push(p),p.shot()}).call(s,c)}},l=0;l<t.length;++l)r(l)}},{key:"shot",value:function(t,e){var i=a.call(this);if(1===i.state)t.time=Date.now()-i.progress.start+i.progress.value;else{if(2!==i.state)return;t.time=i.progress.value}var o=f(t);console.log(o),null!==o&&(1===i.state?this.render([o],0,!0):i.prepareList.push(o),e&&c.call(this,o))}},{key:"pause",value:function(){var t=a.call(this);if(1===t.state){t.state=2;var e=Date.now();t.progress.pause=e,t.progress.value+=e-t.progress.start,clearInterval(t.timer),t.bList.forEach(function(t){t.pause()})}}},{key:"syncTrack",value:function(t){var e=a.call(this).track;e.roll.forEach(function(e){e.appear+=t,e.finish+=t}),e.top.forEach(function(e){e.finish+=t})}},{key:"clear",value:function(){var t=a.call(this),e=t.container,i=t.track;t.bList.forEach(function(t){e.removeChild(t.dom)}),t.bList.splice(0,t.bList.length),i.roll.clear(),i.top.clear(),i.bottom.clear(),i.topTop=0,i.rollTop=0,i.bottomTop=-1}}]),t}();function f(t){if(void 0===t.time||void 0===t.text)return null;var e={second:0,offset:0,type:0,text:t.text,color:"#fff"},i=Math.floor(t.time/1e3);return e.second=i,e.offset=t.time%1e3,t.color&&(e.color=t.color),t.type&&(e.type=t.type),e}function c(t){var e=a.call(this).clip;if(e.has(t.second)){for(var i=e.get(t.second),o=0;o<i.length;++o)if(i[o].offset>t.offset)return void i.splice(o,0,t);i.push(t)}else e.set(t.second,[t])}function h(){var t=a.call(this),e=Math.floor(t.progress.value/1e3),i=t.progress.value%1e3;if(t.clip.has(e)){for(var o,s=t.clip.get(e),n=0;n<s.length&&!(s[n].offset>=i);++n);n>=s.length||(o=s.slice(n),this.render(o,-i))}}e.default=l},function(t,e,i){"use strict";var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}();var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=null,this.state=0,this.cfgObj=null,this.speed=0,this.startTime=0,this.pausePos=0,this.distination=0,this.passed=0,this.offset=0,this.style=null;var i=this;Object.keys(e).forEach(function(t){i[t]=e[t]})}return o(t,[{key:"shot",value:function(){0==this.state&&(this.state=1,0===this.cfgObj.type?this.setTransition("transform",this.speed+"ms","linear",this.offset+"ms"):1!==this.cfgObj.type&&2!==this.cfgObj.type||(this.dom.style.transition="transform 0s linear "+this.offset+"ms, opacity 0s linear "+(this.speed+this.offset)+"ms",this.dom.style.opacity=0),this.dom.style.transform="translateX(-"+this.distination+"px)")}},{key:"pause",value:function(){if(1==this.state){this.state=2;var t=Date.now()-this.startTime,e=0;t<0?this.offset=-t:(this.offset=0,0===this.cfgObj.type&&(e=t/this.speed*(this.distination-this.passed)),this.speed-=t),0===this.cfgObj.type?(this.passed+=e,this.setTransition("transform","0s","linear","0s"),this.dom.style.transform="translateX(-"+this.passed+"px)"):1!==this.cfgObj.type&&2!==this.cfgObj.type||(t<0&&(this.dom.style.transform=""),this.dom.style.transition="",this.dom.style.opacity=this.style.opacity)}}},{key:"resume",value:function(){2==this.state&&(this.state=1,this.startTime=Date.now()+this.offset,0===this.cfgObj.type?this.setTransition("transform",this.speed+"ms","linear",this.offset+"ms"):1!==this.cfgObj.type&&2!==this.cfgObj.type||(this.dom.style.transition="transform 0s linear "+this.offset+"ms, opacity 0s linear "+(this.speed+this.offset)+"ms",this.dom.style.opacity=0),this.dom.style.transform="translateX(-"+this.distination+"px)")}},{key:"setTransition",value:function(t,e,i,o){this.dom.style.transition=[t,e,i,o].join(" ")}},{key:"setTextShadow",value:function(){this.dom.style.textShadow="0 0 1px #000, 0 0 1px #000, 0 0 1px #000"}}]),t}();t.exports=s}]);