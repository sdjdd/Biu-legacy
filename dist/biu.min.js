!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist",i(i.s=1)}([function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.track=[],this.topWhenFull=0}return s(t,[{key:"sync",value:function(t){this.track.forEach(function(e){e.appear&&(e.appear+=t),e.finish+=t})}},{key:"clear",value:function(){this.track.splice(0,this.track.length),this.topWhenFull=0}},{key:"roll",value:function(t,e,i,s,n,r){var o=this.track,a=0,l=e-r;if(0===o.length)return o.push({appear:i,finish:n,height:r}),0;var h=0,f=void 0,c=void 0;t:for(f=0;f<o.length;++f){if(t>=o[f].appear&&o[f].finish<=s){if((h=r-o[f].height)>0){if(a>l)break;var u=o[f].height;for(c=f+1;c<o.length;++c){if(u+=o[c].height,t>=o[c].appear&&o[c].finish<=s)return 0===(h-=o[c].height)?(o.splice(f+1,c-f),o[f].appear=i,o[f].finish=n,o[f].height=r,a):(o.splice(f+1,c-f-1),o[f].appear=i,o[f].finish=n,o[f].height=r,o[f+1].height=-h,a);f=c,a+=u;continue t}return o.splice(f+1,c-f),o[f].appear=i,o[f].finish=n,o[f].height=r,a}var p=-h;return p>0?(o.splice(f,0,{appear:i,finish:n,height:o[f].height-p}),o[f+1].height=p,a):(o[f].appear=i,o[f].finish=n,a)}a+=o[f].height}return a<=l?(o.push({appear:i,finish:n,height:r}),a):(this.topWhenFull>l&&(this.topWhenFull=0),a=this.topWhenFull,this.topWhenFull+=r,a)}},{key:"top",value:function(t,e,i,s){var n=this.track,r=0,o=e-s;if(0===n.length)return n.push({finish:i,height:s}),0;var a=0,l=void 0,h=void 0;t:for(l=0;l<n.length;++l){if(n[l].finish<=t){if((a=s-n[l].height)>0){if(r>o)break;var f=n[l].height;for(h=l+1;h<n.length;++h){if(f+=n[h].height,n[h].finish<=t)return 0===(a-=n[h].height)?(n.splice(l+1,h-l),n[l].finish=i,n[l].height=s,r):(n.splice(l+1,h-l-1),n[l].finish=i,n[l].height=s,n[l+1].height=-a,r);l=h,r+=f;continue t}return n.splice(l+1,h-l),n[l].finish=i,n[l].height=s,r}var c=-a;return c>0?(n.splice(l,0,{finish:i,height:n[l].height-c}),n[l+1].height=c,r):(n[l].finish=i,r)}r+=n[l].height}return r<=o?(n.push({finish:i,height:s}),r):(this.topWhenFull>o&&(this.topWhenFull=0),r=this.topWhenFull,this.topWhenFull+=s,r)}},{key:"bottom",value:function(t,e,i,s){return e-this.top(t,e,i,s)-s}}]),t}();t.exports=n},function(t,e,i){"use strict";var s=r(i(2)),n=r(i(0));function r(t){return t&&t.__esModule?t:{default:t}}window.Biu=s.default,window.BiuTrack=n.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),n=o(i(3)),r=o(i(0));function o(t){return t&&t.__esModule?t:{default:t}}var a=new WeakMap;function l(){if(a.has(this))return a.get(this);var t={};return a.set(this,t),t}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=l.call(this),s=void 0;if(e.el instanceof HTMLElement?s=e.el:"string"==typeof e.el&&(s=document.querySelector(e.el)),i.container=function(){var t=document.createElement("div");return t.style.position="relative",t.style.overflow="hidden",t.style.height="100%",t.style.width="100%",t.style.pointerEvents="none",t}(),s.appendChild(i.container),this.config={speed:e.speed||6e3},this.style={color:"#FFF",fontFamily:"SimHei",fontSize:"25px",fontWeight:"normal",opacity:1},i.bList=[],i.prepareList=[],i.progress={value:0,pause:0,start:0,currentSecond:0},i.timer=null,i.clip=new Map,i.track={roll:new r.default,top:new r.default,bottom:new r.default},i.state=0,e.config)for(var n=Object.keys(e.config),o=0;o<n.length;++o)this.config[n[o]]=e.config[n[o]];if(e.style)for(var a=Object.keys(e.style),h=0;h<a.length;++h)this.style[a[h]]=e.style[a[h]];return this}return s(t,[{key:"getAttr",value:function(){return l.call(this)}},{key:"play",value:function(t){var e=l.call(this),i=e.progress;if(1!==e.state||void 0!==t){var s=2===e.state,n=0===e.state,r=1===e.state;e.state=1;var o=Date.now(),a=this;if(i.start=o,void 0!==t&&(i.value=t,i.currentSecond=Math.floor(t/1e3),this.clear(),p.call(this)),!r){if(s){if(void 0===t){var h=o-i.pause;e.track.roll.sync(h),e.track.top.sync(h),e.track.bottom.sync(h)}e.bList.forEach(function(t){t.resume()})}else n&&void 0===t&&p.call(this);var f=i.value,c=Math.ceil(f/1e3),u=1e3-f%1e3;i.currentSecond!==c&&(i.currentSecond=c,a.biu(c,u));e.timer=setInterval(function(){var t=Date.now()-i.start+i.value,e=Math.ceil(t/1e3),s=1e3-t%1e3;i.currentSecond!==e&&(i.currentSecond=e,a.biu(e,s))},500),e.prepareList.length>0&&(a.render(e.prepareList,0,!0),e.prepareList.splice(0,e.prepareList.length))}}}},{key:"biu",value:function(t,e){for(var i=l.call(this),s=i.bList,n=i.container,r=Date.now(),o=0;o<s.length&&r>=s[o].speed+s[o].startTime;++o)n.removeChild(s[o].dom);if(o>0&&s.splice(0,o),void 0!==document.hidden?!document.hidden:void 0===document.webkitHidden||!document.webkitHidden){var a=i.clip.get(t);a&&this.render(a,e)}}},{key:"load",value:function(t){t instanceof Array||(t=[t]);var e=this;return t.forEach(function(t){var i=c.call(e,t);null!==i&&u.call(e,i)}),this}},{key:"render",value:function(t,e,i){e||(e=0),void 0===i&&(i=!1);for(var s=[],r=[],o=[],a=0;a<t.length;++a){var h=t[a],c={dom:f.call(this,h),node:h,delay:e,immediately:i};switch(h.type){case 1:r.push(c);break;case 2:o.push(c);break;default:s.push(c)}}s.length>0&&function(t){var e=this.config,i=l.call(this),s=i.container,r=s.clientHeight,o=s.clientWidth,a=Date.now();t.forEach(function(t){var l=t.dom,h=t.node,f=t.delay,c=t.immediately,u=c?0:f+h.offset;l.style.left=o+2+"px",l.style.willChange="transform",s.appendChild(l);var p=new n.default({cfgObj:h,dom:l,speed:e.speed,offset:u,distination:o+l.offsetWidth+2+2,startTime:a+u});i.bList.push(p);var d=p.distination/p.speed,y=a+p.speed+u,v=(p.distination-l.offsetWidth-2)/d+a+u,g=l.offsetWidth/d+a+u,m=i.track.roll,b=m.roll(a+u,r,g,v,y,l.offsetHeight);l.style.top=b+"px",p.shot()})}.call(this,s),r.length>0&&function(t){var e=this.config,i=l.call(this),s=i.container,r=s.clientHeight,o=s.clientWidth,a=Date.now();t.forEach(function(t){var l=t.dom,h=t.node,f=t.delay,c=t.immediately,u=c?0:f+h.offset;l.style.left=o+2+"px",l.style.willChange="transform",s.appendChild(l);var p=new n.default({cfgObj:h,dom:l,speed:e.speed,offset:u,distination:(o+l.offsetWidth)/2+2,startTime:a+u}),d=a+p.speed+p.offset,y=i.track.top,v=y.top(a+u,r,d,l.offsetHeight);l.style.top=v+"px",p.top=v,i.bList.push(p),p.shot()})}.call(this,r),o.length>0&&function(t){var e=this.config,i=l.call(this),s=i.container,r=s.clientHeight,o=s.clientWidth,a=Date.now();t.forEach(function(t){var l=t.dom,h=t.node,f=t.delay,c=t.immediately,u=c?0:f+h.offset;l.style.left=o+2+"px",l.style.willChange="transform",s.appendChild(l);var p=new n.default({cfgObj:h,dom:l,speed:e.speed,offset:u,distination:(o+l.offsetWidth)/2+2,startTime:a+u}),d=a+p.speed+p.offset,y=i.track.bottom,v=y.bottom(a+u,r,d,l.offsetHeight);l.style.top=v+"px",p.top=v,i.bList.push(p),p.shot()})}.call(this,o)}},{key:"shot",value:function(t,e){var i=l.call(this);if(1===i.state)t.time=Date.now()-i.progress.start+i.progress.value;else{if(2!==i.state)return;t.time=i.progress.value}var s=c.call(this,t);null!==s&&(1===i.state?this.render([s],0,!0):i.prepareList.push(s),e&&u.call(this,s))}},{key:"pause",value:function(){var t=l.call(this);if(1===t.state){t.state=2,clearInterval(t.timer);var e=Date.now();t.progress.pause=e,t.progress.value+=e-t.progress.start,t.bList.forEach(function(t){e<t.speed+t.startTime&&t.pause()})}}},{key:"clear",value:function(){var t=l.call(this),e=t.container,i=t.track;t.bList.forEach(function(t){e.removeChild(t.dom)}),t.bList.splice(0,t.bList.length),i.roll.clear(),i.top.clear(),i.bottom.clear()}}]),t}();function f(t){var e=document.createElement("div");e.innerText=t.text;var i=this.style;return Object.keys(i).forEach(function(t){e.style[t]=i[t]}),Object.keys(t.style).forEach(function(i){e.style[i]=t.style[i]}),e.style.position="absolute",e.style.whiteSpace="pre",e.style.display="inline-block",e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.pointerEvents="none",e.style.textShadow="0 0 1px #000, 0 0 1px #000, 0 0 1px #000",e}function c(t){return void 0===t.time||void 0===t.text?null:(t.style?t.style.color||(t.style.color=t.color):(t.style={},t.color&&(t.style.color=t.color)),{second:Math.floor(t.time/1e3),offset:t.time%1e3,type:t.type||0,text:t.text,style:t.style})}function u(t){var e=l.call(this).clip;if(e.has(t.second)){for(var i=e.get(t.second),s=0;s<i.length;++s)if(i[s].offset>t.offset)return void i.splice(s,0,t);i.push(t)}else e.set(t.second,[t])}function p(){var t=l.call(this),e=Math.floor(t.progress.value/1e3),i=t.progress.value%1e3;if(t.clip.has(e)){for(var s,n=t.clip.get(e),r=0;r<n.length&&!(n[r].offset>=i);++r);r>=n.length||(s=n.slice(r),this.render(s,-i))}}e.default=h},function(t,e,i){"use strict";var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dom=null,this.state=0,this.cfgObj=null,this.speed=0,this.startTime=0,this.pausePos=0,this.distination=0,this.passed=0,this.offset=0,this.top=0;var i=this;Object.keys(e).forEach(function(t){i[t]=e[t]})}return s(t,[{key:"shot",value:function(){0==this.state&&(this.state=1,0===this.cfgObj.type?this.dom.style.transition="transform "+this.speed+"ms linear "+this.offset+"ms":1!==this.cfgObj.type&&2!==this.cfgObj.type||(this.dom.style.transition="transform 0s linear "+this.offset+"ms, top 0s linear "+(this.speed+this.offset)+"ms",this.dom.style.top="-"+(this.dom.offsetHeight+2)+"px"),this.dom.style.transform="translateX(-"+this.distination+"px)")}},{key:"pause",value:function(){if(1==this.state){this.state=2;var t=Date.now()-this.startTime,e=0;t<0?this.offset=-t:(this.offset=0,0===this.cfgObj.type&&(e=t/this.speed*(this.distination-this.passed)),this.speed-=t),0===this.cfgObj.type?(this.passed+=e,this.dom.style.transition="transform 0s linear 0s",this.dom.style.transform="translateX(-"+this.passed+"px)"):1!==this.cfgObj.type&&2!==this.cfgObj.type||(t<0&&(this.dom.style.transform=""),this.dom.style.transition="",this.dom.style.top=this.top+"px")}}},{key:"resume",value:function(){2==this.state&&(this.state=1,this.startTime=Date.now()+this.offset,0===this.cfgObj.type?this.dom.style.transition="transform "+this.speed+"ms linear "+this.offset+"ms":1!==this.cfgObj.type&&2!==this.cfgObj.type||(this.dom.style.transition="transform 0s linear "+this.offset+"ms, top 0s linear "+(this.speed+this.offset)+"ms",this.dom.style.top="-"+(this.dom.offsetHeight+2)+"px"),this.dom.style.transform="translateX(-"+this.distination+"px)")}}]),t}();t.exports=n}]);